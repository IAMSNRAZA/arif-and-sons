<div class="container">
  <div class="card p-3">
    <div class="card-header">
      <div class="float-right">
        <%= link_to "Add Customer", new_customer_path, class: "btn btn-outline-primary mr-2" %>
        <%= link_to "Add Product", new_product_path, class: "btn btn-outline-primary mr-2" %>
      </div>
      <h2 class="mb-0">Create a New Order</h2>
    </div>
    <%= form_for @order do |form| %>
      <div class="form-group row">
        <div class="col-md-4">
          <%= form.label :customer_id, "Customer", class: "font-weight-bold" %>
          <%= form.select :customer_id, options_for_select(current_user.customers.map { |customer| [customer.name, customer.id] }), {}, class: "form-control" %>
        </div>

        <div class="col-md-8">
          <%= form.label :order_items_attributes, "Order Items", class: "font-weight-bold" %>
          <div id="order-items">
            <%= form.fields_for :order_items do |order_item_form| %>
              <%= render "order_item_fields", form: order_item_form %>
            <% end %>
            <div class="links">
              <%= link_to_add_association "Add Item", form, :order_items, partial: "order_item_fields", locals: { form: form }, class: 'nested_fields_btn btn btn-outline-primary rounded float-right' %>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :total, "Total", class: "font-weight-bold" %>
        <%= form.number_field :total, class: "form-control", style: 'text-align: right;'%>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <%= form.label :remaining_amount, "Remaining Amount", class: "font-weight-bold" %>
          <%= form.number_field :remaining_amount, class: "form-control" , disabled: true %>
        </div>

        <div class="form-group col-md-6">
          <%= form.label :payed_amount, "Payed Amount", class: "font-weight-bold" %>
          <%= form.number_field :payed_amount, class: "form-control" %>
        </div>
      </div>

      <div class="actions mt-3">
        <%= form.submit "Create Order", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
